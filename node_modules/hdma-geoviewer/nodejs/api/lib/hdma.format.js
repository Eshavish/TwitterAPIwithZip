var OGR2OGR=require("ogr2ogr"),
		FS=require("fs");



//FACTORY
module.exports=function(){
  return new Format();
}


//CLASS
var Format=function(){
  //properties

}



//geojson to shp
Format.prototype.geojsonToShp=function(geojson, outputPath, callback){
		var shp=OGR2OGR(geojson).format('ESRI Shapefile').skipfailures().stream()

		var r=shp.pipe(FS.createWriteStream(outputPath))

		//callback
		r.on("finish", function(){
			if(callback){
				callback();
			}
		})

		/**
		shp.exec(function(err, data){

		})
		*/
}


//geojsonToKml
Format.prototype.geojsonToKml=function(geojson, outputPath, callback){
		var	kml=OGR2OGR(geojson).format('KML').destination(outputPath).skipfailures(); //need to giv the desitination path, otherwise it will marke errors
		kml.exec(function(e,data){
			if(callback){
				callback(e,data)
			}
		})
}
